<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Portal - Bootstrap 5 Admin Dashboard Template For Developers</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Portal - Bootstrap 5 Admin Dashboard Template For Developers">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">

</head> 

<body class="app" dir="rtl">   	

    		<h1 class="app-page-title">זאת דוגמא למה שמתקבל אצל הסוכן במייל:</h1>

	  <table class="main_table">
    <thead>
      <tr class="thead">
        <th>שם מועמד/ת</th>
        <th>מס׳ משרה</th>
        <th>שם משרה</th>
        <th>סטטוס מועמד</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr class="trow">
        <td>קטיה קנוב</td>
        <td>#206538</td>
        <td>אנליטיקאי/ת QC למעבדת הביולוגיה!</td>
        <td>קיים אצל הלקוח</td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226438">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>סמי הכבאי</td>
        <td>#229501</td>
        <td>  מזכיר/ת ייצור ומשאבי אנוש   </td>
        <td>התקבל (סיום אחריות) </td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226412">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>עמי הזגג</td>
        <td>#229520</td>
        <td>  מנהל/ת שירות גלובאלי-1238   </td>
        <td>לא הגיע לראיון </td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>ביבי שרה</td>
        <td>#217274</td>
        <td>   מכונאי/ת אחזקה  </td>
        <td>חדש</td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>ישראל ישראלי</td>
        <td>#191075</td>
        <td>    חשמלאי אחזקה לבנייני משרדים   </td>
        <td>חדש</td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>דונלאד דאק</td>
        <td>#229407</td>
        <td>    אחראי/ת הרכבות-     </td>
        <td>חדש</td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>רובי שמי</td>
        <td>#228764</td>
        <td>    קניין /ית רכש למחלקת לוגיסטיקה      </td>
        <td>זומן לראיון </td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>שקד גדולי</td>
        <td>#228916</td>
        <td>   מנהל/ת פרויקט עם ניסיון רב בניהול פרויקטים של משרדים      </td>
        <td>חדש</td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
      <tr class="trow">
        <td>עמי הזגג</td>
        <td>#228762</td>
        <td>   אחראי.ית אדמיניסטרטיבי.ת    ה  </td>
        <td>התפטר </td>
        <td><a href="http://svt.jobs/agent/222267/candidates/?cid=226434">למשרה</a></td>
      </tr>
    </tbody>
  </table>
	
	<br/>
	<br/>
	<br/>
<div class="app-content pt-3 p-md-3 p-lg-4">
	<div class="container-xl">
		    
		<h1 class="app-page-title" dir="rtl">זאת התוצאה איך יראה העמוד:</h1>
		<h1 class="app-page-title" dir="rtl">SVT סטטוס משרות יומית לסוכן</h1>
		
		<div class="app333 row g-4 mb-4">
			<div class="col-6 col-lg-3">
				<div class="app-card app-card-stat shadow-sm h-100">
					<div class="app-card-body p-3 p-lg-4">
						<h4 class="stats-type mb-1">Projects2</h4>
						<div class="stats-figure">23</div>
						<div class="stats-meta">Open</div>
					</div><!--//app-card-body-->
				</div><!--//app-card-->
			</div><!--//col-->
		</div><!--//row-->

		<div class="row g-4 mb-4">
			<div class="col-12 col-lg-12">
				<div class="app-card app-card-orders-table shadow-sm mb-5">
					<div class="app-card-body">
						<div class="table-responsive">
							<table class="table app-table-hover mb-0 text-left">
								<thead>
									<tr>
										<th class="cell">מספר משרה</th>
										<th class="cell">שם המועמד</th>
										<th class="cell">סטטוס</th>
										<th class="cell">שם המשרה</th>
										<th class="cell">משרות נוספות</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="cell"><a class="btn-sm app-btn-secondary" href="#">View</a></td>
										<td class="cell">John Sanders</td>
										<td class="cell">John Sanders</td>
										<td class="cell"><span class="truncate">Lorem ipsum dolor sit amet eget volutpat erat</span></td>
										<td class="cell">#15346</td>
									</tr>
			
								</tbody>
							</table>
				        </div><!--//table-responsive-->
				       
				    </div><!--//app-card-body-->		
				</div>
			</div><!--//col-->

			<script>
			
      // Get the table element by its class name
      var table = document.querySelector('.main_table');

      // Get all the rows in the table body
      var rows = table.querySelectorAll('tbody tr');

      // Object to store the count of candidates for each status
      var statusCounts = {};
	  
      var fullData = [];
	
		var i = 0;
      // Iterate through each row
      rows.forEach(function(row, index) {
        // Find the cell containing the status value
		var nameCell = row.querySelector('td:nth-child(1)');
		var nameCell2 = row.querySelector('td:nth-child(2)');
		var nameCell3 = row.querySelector('td:nth-child(3)');
		var nameCell5 = row.querySelector('td:nth-child(5)');
        var statusCell = row.querySelector('td:nth-child(4)');

		fullData[i] = {
		name2: nameCell2.textContent.trim(),
		name: nameCell.textContent.trim(),
		name3: nameCell3.textContent.trim(),
		name4: nameCell5.textContent.trim(),
		statusCell: statusCell.textContent.trim()
		}
		
        // Extract the status value
        var status = statusCell.textContent.trim();

        // Increase the count for the respective status
        if (statusCounts.hasOwnProperty(status)) {
          statusCounts[status]++;
        } else {
          statusCounts[status] = 1;
        }
		i++;
      });
	  

	console.log(fullData)	 
	console.log(statusCounts)	 

var statusArray = Object.keys(statusCounts);
	console.log(statusArray)	 

				var projectsTable = document.querySelector(".app-card-orders-table tbody");

				// Clear existing rows
				projectsTable.innerHTML = "";

				// Add rows dynamically
				fullData.forEach(function(data) {
					var row = document.createElement("tr");
					row.innerHTML = `
						<td class="cell"><a class="btn-sm app-btn-secondary" href="https://www.svt.jobs/position/${data.name2.split('#')[1]}">${data.name2}</a></td>
						<td class="cell"><span class="truncate">${data.name}</span></td>
						<td class="cell">${data.statusCell}</td>
						<td class="cell">${data.name3}</td>
						<td class="cell"><span class="badge bg-primary">TBD</span></td>
					`;
					projectsTable.appendChild(row);
				});
				
				
				projects = statusArray; // Your project objects
				var projectsTable2 = document.querySelector(".app333");

				// Clear existing rows
				projectsTable2.innerHTML = "";

				// Add rows dynamically
				projects.forEach(function(project) {
					var row = document.createElement("tr");
					row.innerHTML = `
		<div class="row g-4 mb-4">
			<div class="col-6 col-lg-3">
				<div class="app-card app-card-stat shadow-sm h-100">
					<div class="app-card-body p-3 p-lg-4">
						<h4 class="stats-type mb-1">${project}</h4>
						<div class="stats-figure">${statusCounts[project]}</div>
						<div class="stats-meta"></div>
					</div><!--//app-card-body-->
					<a class="app-card-link-mask" href="#"></a>
				</div><!--//app-card-->
			</div><!--//col-->
		</div><!--//row-->
					`;
					projectsTable2.appendChild(row);
				});
				
				
			</script>
			
			
		</div><!--//row-->
	</div><!--//container-fluid-->
</div><!--//app-content-->

  
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  

    
    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script> 
  
</body>
</html> 

